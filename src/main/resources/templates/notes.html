<!DOCTYPE html>
<html>
<head>
    <title>User Home</title>
</head>
<body>

    <h1 data-th-inline="text">[[${#httpServletRequest.remoteUser}]]'s notes</h1>

    <div>
        <table style="border: 1px solid black">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Class Code</th>
                <th>Brief Introduction</th>
                <th>Rating</th>
                <th>Download</th>
            </tr>                
            <tr data-th-each="note : ${notes}">
                    <td data-th-text="${note.id}"></td>
                    <td data-th-text="${note.name}"></td>
                    <td data-th-text="${note.courseId}"></td>
                    <td data-th-text="${note.briefIntro}"></td>
                    <td data-th-text="${note.rating}"></td>
                    <a href="${note.fileDir}" download="noteFile">
                        <td data-th-text="${note.fileDir}"></td>
                    </a>
             </tr>
        </table>
    </div>
    
    <hr/>
    Upload Note<br/>
    <hr />
        <a data-th-href="@{/files}">Upload a File</a>
    <hr />
    
    <form data-th-action="@{/notes/add}" name="addNoteForm" method="post">
        Title:<input type="text" name="name" /><br />       
        Class Code:<input type="text" name="courseId" /><br />
        Brief Introduction:<br />
        <textarea rows="10" cols="30" name="briefIntro"></textarea><br />
        Upload from your computer:<br />
        <input type="file" multiple="multiple" name="fileDir" /><br />
        <input type="text" name="userId" hidden=true />
        <input type="submit" value="Add Note" />
    </form>
    
    <form data-th-action="@{/files}" name="uploadFileForm" method="POST" enctype="multipart/form-data" >                
<!--            <form data-th-action="@{/files(${_csrf.parameterName}=${_csrf.token})}" name="uploadFileForm" method="POST" enctype="multipart/form-data" >                                -->
                File to upload:<input type="file" name="file" /><br />
                <input type="submit" value="Upload" />
    </form>
    
    <hr />
    <form data-th-action="@{/logout}" method="post">
        <input type="submit" value="Sign Out" />
    </form>
</body>
</html>